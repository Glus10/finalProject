this.analytics=this.analytics||{},this.analytics.js=function(e){"use strict";function n(e,n){if(0==e.length)return[];for(var t=[],a=0;a<e.length;a++){var o=e[a];n(o)&&t.push(o)}return t}function t(e,n,t,a){void 0===a&&(a=!1);var o="",r=a?"; secure":"";if(t){var i=new Date;i.setTime(i.getTime()+24*t*60*60*1e3),o="; expires="+i.toUTCString()}document.cookie=e+"="+n+o+"; path=/"+r}function a(e,n,t){var a="";if(t){var o=new Date;o.setTime(o.getTime()+60*t*60*1e3),a="; expires="+o.toUTCString()}document.cookie=e+"="+n+a+"; path=/"}function o(e){for(var n=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var o=t[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(n))return o.substring(n.length,o.length)}return null}function r(e){return null==e}var i,u=(i=r,function(e){return!i(e)});function _(e,n,t,a){void 0===t&&(t=!0),void 0===a&&(a=!0);var o=new XMLHttpRequest;if("withCredentials"in o)o.open(e,n,a),o.withCredentials=t;else{if("undefined"==typeof XDomainRequest)return null;(o=new XDomainRequest).open(e,n)}return o}var s="sandbox",c=new RegExp("^[a-z-]*(fe|jp)[a-z.-]*$"),E=new RegExp("^[a-z-]*(eu|uk|de)[a-z.-]*$"),T="https://",d=function(e,n){for(var t=[],a=e.length,o=0;o<a;o++){var r=e[o];t.push(n(r))}return t}(["payments","payments-eu","payments-sandbox","payments-eu-sandbox","payments-fe","pmt.integ","payments-eu.integ","payments-fe.integ","payments-preprod","payments-eu-preprod-dub.dub.proxy","payments-jp-preprod"],function(e){return"https://"+e+".amazon.com/checkout/signin"});function p(e){return!!e&&d.indexOf(e.action)>=0}function m(e,t){if(e){var a=n(Array.prototype.slice.call(e.querySelectorAll("input[type=hidden]")),function(e){return e.name==t})[0];if(a)return a.value}return"unknown"}function N(e){return p(e)?(n=e.action,(t=document.createElement("a")).href=n,t.hostname):null;var n,t}function l(e){return E.test(e)?"UK":c.test(e)?"JP":"US"}function f(e){return E.test(e)?"GBP":c.test(e)?"JPY":"USD"}function A(e){var n=m(e,s);return"unknown"!=n&&"true"==n}function O(e){for(var t=0,a=function(e){var t;return e?e instanceof HTMLElement&&(t=e.querySelectorAll("form")):t=document.querySelectorAll("form"),t?n(Array.prototype.slice.call(t),p):[]}(e);t<a.length;t++){var o=a[t];if(p(o))return o}return null}var h,I,g,S="apay-session-set";!function(e){e.CHANGE_PAYMENT="changePayment",e.CHANGE_ADDRESS="changeAddress"}(h||(h={})),function(e){e.INIT_CHECKOUT="amazon.Pay.initCheckout",e.RENDER_BUTTON="amazon.Pay.renderButton",e.BIND_UPGRADE_ACTION="amazon.Pay.bindUpgradeAction",e.BIND_CHANGE_ACTION="amazon.Pay.bindChangeAction",e.SWITCH_ACCOUNT="amazon.Pay.switchAccount",e.CHANGE_PAYMENT_METHOD="amazon.Pay.changePaymentMethod",e.CHANGE_SHIPPING_ADDRESS="amazon.Pay.changeShippingAddress",e.CHANGE_ACCOUNT="amazon.Pay.changeAccount"}(I||(I={})),function(e){e.INIT_CHECKOUT="amazon.buywithprime.initCheckout",e.CHANGE_PAYMENT_METHOD="amazon.buywithprime.changePaymentMethod",e.CHANGE_SHIPPING_ADDRESS="amazon.buywithprime.changeShippingAddress",e.CHANGE_ACCOUNT="amazon.buywithprime.changeAccount"}(g||(g={}));var C={en:"en_US",fr:"fr_FR",it:"it_IT",es:"es_ES",de:"de_DE",ja:"ja_JP","en-us":"en_US","en-gb":"en_GB","fr-fr":"fr_FR","it-it":"it_IT","es-es":"es_ES","de-de":"de_DE","ja-jp":"ja_JP"},y=[],U="/gp/widgets/sessionstabilizer",D=365,P="true",R=!1;function v(){var e,n,t=O();if(t){var a=N(t);if(a)return""+T+a+U+"?"+(e={countryOfEstablishment:l(a),ledgerCurrency:f(a),isSandbox:A(t)},n=["originDomain","returnDomain"],Object.keys(e).map(function(t){return r(e[t])?null:t+"="+(n.indexOf(t)>-1?e[t]:encodeURIComponent(e[t]))}).filter(u).join("&"))}return null}function b(e,n){if(null!=o(S))e();else if(y.push(e),!R){var a=n||v();if(R=!0,a){var r=_("GET",a,!0);r&&(r.onload=function(){if(R=!1,r&&200===r.status){var e=JSON.parse(r.responseText);e&&(P=e.apaySessionSet)}for(t(S,P,D,!0);y.length>0;){var n=y.pop();"function"==typeof n&&n()}},r.send())}}}var M={HTML_BUTTON_RENDER:"apay-html-button-render",HTML_BUTTON_RENDER_TAG:"pwa",SUB_PAGE_TYPE:"sub-page-type",CSS_BUTTON:"css_button",PAGE_ACTION:"page-action",ADDITIONAL_REQUEST_DATA:"additional-request-data",MERCHANT_DOMAIN_KEY:"window",SESSION_ID:"session-id",CORS_FAILURE:"cors-failure",INVALID_RESPONSE:"invalid-response",LATENCY:"cookie-creation-latency",MAXO_BUTTON:"maxo-button",MAXO_BUTTON_RENDER:"maxo-button-render",MAXO_WEBLAB_RESPONSE_RECIEVED:"maxo-weblab-response-received",MAXO_BUTTON_REDIRECT:"maxo-button-redirect",MAXO_BUTTON_CLICK:"maxo-button-click",MAXO_BUTTON_TAG:"maxo-button-tag",MAXO_BUTTON_RENDER_LATENCY:"maxo-button-render-latency",MAXO_BUTTON_REDIRECT_LATENCY:"maxo-button-redirect-latency",MAXO_BUTTON_DESIGN:"button-design",MAXO_BUTTON_COLOR:"color",BUTTON_PLACEMENT:"button-placement",CHECKOUT_SESSION_PRODUCT_TYPE:"checkout-session-product-type",CHANGE_SHIPPING_ADDRESS:"change-shipping-address",CHANGE_PAYMENT_METHOD:"change-payment-method",CHECKOUT_SESSION_ID:"checkout-session-id",MAXO_ADDITIONAL_INFO:"maxo-additional-info",INTEGRATION_TYPE:"integration-type",IS_SKIP_PREORDER_PAGE:"is-skip-preorder-page",MAXO_DEFAULT_INTEGRATION:"maxo-default-integration",SIGNATURE_BUTTON_SESSION_CONFIG:"maxo-button-signature-session-config",SIGNATURE_BUTTON_OBJECT:"maxo-button-signature-object",SIGNATURE_BUTTON_REDIRECT:"maxo-button-signature-redirect",WEBLAB_DATA:"weblab-data",MAXO_BUTTON_VIEW_INITIATED:"maxo-button-view-initiated",VIEW_TYPE:"viewType",BIND_UPGRADE_ACTION:"bind-upgrade-action",BIND_RECURRING_UPDATE_ACTION:"bind-recurring-update-action",MAXO_JS_LOAD_TIME:"maxo-js-load-time",MAXO_PAYMENT_BUTTON_TYPE:"maxo-payment-button-type",MAXO_BUTTON_RENDER_COMPLETE:"maxo-button-render-complete",PAYMENT_METHOD_ON_FILE_SETUP_INTENT:"setup-intent",CHARGE_PERMISSION_TYPE:"chargePermissionType",PAYMENT_METHOD_ON_FILE_SETUP_TYPE:"paymentMethodOnFileSetupType",CHARGE_PERMISSION_TYPE_PAYMENT_METHOD_ON_FILE:"PAYMENT_METHOD_ON_FILE",PAYMENT_METHOD_ON_FILE_SETUP_TYPE_SETUP_ONLY:"SETUP_ONLY"},B=function(e,n,a,r,i){var u="https://"+n+"/cs/uedata",s=function(){var n,s,c=_("POST",u,!0);c&&(i||(n=e,s={name:M.SESSION_ID,value:o(M.SESSION_ID)},n.addInfo(s)),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onload=function(){},c.send(e.toQueryString()+"&countryOfEstablishment="+a+"&ledgerCurrency="+r),c.onerror=function(){c&&0===c.status&&!o("amazon-pay-cors-blocked-status")&&navigator.userAgent.match(/Firefox/i)&&t("amazon-pay-cors-blocked-status","true",1/24)},c&&4===c.readyState&&200===c.status&&e.reset())};!0===i?s():b(s)};var H,G,L=function(){function e(e,n){this.merchantId=e,this.metrics={counters:[],timings:[],info:[]},this.metricsPublisher=n}return e.prototype.addCounter=function(e){this.metrics.counters.push(e)},e.prototype.addTiming=function(e){this.metrics.timings.push(e)},e.prototype.addInfo=function(e){this.metrics.info.push(e)},e.prototype.publish=function(e){this.metricsPublisher&&this.metricsPublisher(this,e)},e.prototype.reset=function(){this.metrics.timings=[],this.metrics.counters=[]},e.prototype.toQueryString=function(){return"sellerId="+this.merchantId+"&data="+encodeURIComponent(JSON.stringify(this.metrics))},e}(),w="merchantId";function x(){if(G)return G;var e=O();if(e){H=N(e);var n=m(e,w);G=new L(n);var t={name:M.SUB_PAGE_TYPE,value:M.CSS_BUTTON},a={name:M.PAGE_ACTION,value:M.HTML_BUTTON_RENDER},o=M.MERCHANT_DOMAIN_KEY+":"+window.location.host,r={name:M.ADDITIONAL_REQUEST_DATA,value:o};return G.addInfo(t),G.addInfo(a),G.addInfo(r),G}return null}function Y(){var e,n,t;e=M.HTML_BUTTON_RENDER,n={name:e,tags:[M.HTML_BUTTON_RENDER_TAG]},(t=x())&&t.addCounter(n)}var z={apchsHost:"https://apay-us.amazon.com",defaultAuthUIHost:"https://apay-us.amazon.com",authUIHostByLang:{en_US:"https://apay-us.amazon.com",en_GB:"__en_GB_authUIHost__",it_IT:"__it_IT_authUIHost__",de_DE:"__de_DE_authUIHost__",es_ES:"__es_ES_authUIHost__",fr_FR:"__fr_FR_authUIHost__",ja_JP:"__ja_JP_authUIHost__"},microTextVersion:{it_it:"_CB1558571088_",de_de:"_CB1558571088_",es_es:"_CB1558571088_",fr_fr:"_CB1558571088_",en_us:"_CB1558571088_",en_gb:"_CB440556592_",ja_jp:"_CB1568869902_"},coe:{USD:"US",EUR:"DE",GBP:"UK",JPY:"JP"},regionCode:"01",allowedLedgerCurrencies:"USD",domainFallbackLanguage:"en_US",allowedCheckoutLanguages:"en_US",supportedBrowserLanguages:"en,en-us",boltDomain:"https://connect.bolt.com",allowedCurrencyCodes:"USD"};var k="amazon-pay-connectedAuth",X={CONNECTEDAUTH_GENERAL:"connectedAuth_general",LWA_GENERAL:"lwa_general"},F="language",j="apay-session-set",J="isConnectedAuth",K="language",q="apst",W="origin_url";function V(e,n,t){if(t){var a=document.createElement("input");a.type="hidden",a.name=n,a.value=t,e.appendChild(a)}}function Q(e){var n=m(e,K);if("unknown"!==n)return n.replace("-","_");var t=function(){var e=navigator.languages;if(r(e)&&!r(navigator.language)&&(e=[navigator.language]),!r(e))for(var n=0;n<e.length;n++)if(z.supportedBrowserLanguages.split(",").indexOf(e[n].toLowerCase())>-1)return C[e[n].toLowerCase()];return null}();return t&&V(e,K,t.replace("_","-")),t}function $(e,n){var t;if(t=n||O()){e(),a(k,X.CONNECTEDAUTH_GENERAL,1),V(t,J,"true"),V(t,W,window.location.origin);var r=o(j);r&&V(t,q,r);var i=Q(t);i&&a(F,i,1),B(G,H,l(H),f(H))}}var Z=document.body;function ee(e){$(Y,e)}ee();return new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){var n=O(e);n&&ee(n)})})}).observe(Z,{childList:!0,subtree:!0}),e.onAmazonPayFormReady=ee,e}({});
